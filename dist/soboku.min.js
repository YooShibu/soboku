!function(t){"use strict";function n(t,n){function r(){this.constructor=t}for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function r(t){switch(t.length){case 1:return function(n){return t(n[0])};case 2:return function(n){return t(n[0],n[1])};case 3:return function(n){return t(n[0],n[1],n[2])};case 4:return function(n){return t(n[0],n[1],n[2],n[3])};default:return function(n){return t.apply(void 0,n)}}}function e(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function i(t){for(var n=[],r=0;t.length>r;++r){var e=t[r];-1===o(n,e)&&n.push(e)}return n}function o(t,n){for(var r=0;t.length>r;++r)if(t[r]===n)return r;return-1}function s(t,n){if(!(0>n)){for(var r=n,e=n+1;t.length>e;++r,++e)t[r]=t[e];t.pop()}}function u(t,n){for(var r=[],e=0;t.length>e;++e)r.push(n(t[e]));return r}function p(t,n){var r={};for(var e in t)r[e]=n(t[e]);return r}function a(t){return"object"==typeof t&&t instanceof w}function c(t){return"object"==typeof t&&"function"==typeof t.s}function h(t){return a(t)&&e(t,"depends")}function f(t){return c(t)?t:new b(t)}function l(t){for(var n=[],r=0;t.length>r;++r){var e=t[r];h(e)?n=n.concat(e.depends):a(e)&&n.push(e)}return i(n)}function y(t){return t.s()}var d=function(){function t(t,n){this.listeners=t,this.listener=n}return t.prototype.unsubscribe=function(){var t=this.listeners;null!==t&&(s(t,o(t,this.listener)),this.listeners=null,this.listener=null)},t}(),v=function(){function t(t,n){if(this.listener=t,this.thisArg=n,"function"!=typeof t)throw new TypeError("'listener' must be a function")}return t.prototype.read=function(t){this.listener.call(this.thisArg,t)},t}(),w=function(){function t(){this.listeners=[]}return t.prototype.next=function(t){for(var n=this.listeners,r=0;n.length>r;++r)n[r].read(t);return t},t.prototype.report=function(t){var n=t instanceof v?t:new v(t);return this.listeners.push(n),new d(this.listeners,n)},t.prototype.listenerCount=function(){return this.listeners.length},t}(),g=function(t){function r(n){var r=t.call(this)||this;return r.state=n,r}return n(r,t),r.prototype.next=function(n){return this.state=n,t.prototype.next.call(this,n)},r.prototype.s=function(){return this.state},r}(w),b=function(){function t(t){this.state=t}return t.prototype.s=function(){return this.state},t}(),x=function(t){function r(n,r){var e=t.call(this)||this;return e.gatekeeper=n,r.report(new v(e.listener,e)),e}return n(r,t),r.prototype.listener=function(t){this.gatekeeper.s()&&this.next(t)},r}(w),m=function(t){function r(n){var r=t.call(this)||this;return r.array=[],r.array=n||[],r}return n(r,t),r.prototype.s=function(){return this.array},r.prototype.pop=function(){var t=this.array.pop();return this.next(this.array),t},r.prototype.push=function(){var t=Array.prototype.push.apply(this.array,arguments);return this.next(this.array),t},r.prototype.reverse=function(){return this.array.reverse(),this.next(this.array),this.array},r.prototype.shift=function(){var t=this.array.shift();return this.next(this.array),t},r.prototype.sort=function(t){return this.array.sort(t),this.next(this.array),this.array},r.prototype.splice=function(){return Array.prototype.splice.apply(this.array,arguments),this.next(this.array),this.array},r.prototype.unshift=function(){var t=Array.prototype.unshift.apply(this.array,arguments);return this.next(this.array),t},r}(w),C=function(t){function r(){var n=null!==t&&t.apply(this,arguments)||this;return n.depends=[],n}return n(r,t),r.prototype.addDepends=function(t,n){for(var r=l(t),e=0;r.length>e;++e)r[e].report(n);this.depends.push.apply(this.depends,r)},r.prototype.listener=function(t){this.next(this.s())},r}(w),j=function(t){function r(n){var r=t.call(this)||this,e=[];for(var i in n)e.push(n[i]);return t.prototype.addDepends.call(r,e,new v(r.listener,r)),r.shObj=p(n,f),r}return n(r,t),r.prototype.s=function(){return p(this.shObj,y)},r}(C),D=function(t){function e(n,e){var i=t.call(this)||this;return i.func=r(n),i.states=u(e,f),t.prototype.addDepends.call(i,e,new v(i.listener,i)),i}return n(e,t),e.prototype.s=function(){var t=u(this.states,y);return this.func(t)},e}(C),O=function(t){function r(n){var r=t.call(this)||this;r.condition=n;var e=new v(r.onConditionChanged,r);return t.prototype.addDepends.call(r,[n],e),r}return n(r,t),r.prototype.onConditionChanged=function(){var t=this.s();t&&this.next(t)},r.prototype.s=function(){return this.condition.s()},r}(C),A=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return n(r,t),r.prototype.s=function(){return!t.prototype.s.call(this)},r}(O),P=function(t){function r(n,r){var e=t.call(this)||this;return e.permition=n,e.reporter=r,e.prevPermition=n.s(),t.prototype.addDepends.call(e,[n],new v(e.permitionChanged,e)),t.prototype.addDepends.call(e,[r],new v(e.publish,e)),e}return n(r,t),r.prototype.s=function(){return this.reporter.s()},r.prototype.publish=function(){this.permition.s()&&this.next(this.reporter.s())},r.prototype.permitionChanged=function(){var t=this.permition.s();t&&!1===this.prevPermition&&this.next(this.reporter.s()),this.prevPermition=t},r}(C);t.state=function(t){return new g(t)},t.toStateHolder=f,t.listener=function(t,n){return new v(t,n)},t.reporter=function(){return new w},t.ReporterClass=w,t.gate=function(t,n){return new x(t,n)},t.sarray=function(t){return new m(t)},t.combine=function(t){return new j(t)},t.editer=function(t,n){return new D(t,n)},t.trigger=function(t){return new O(t)},t.ntrigger=function(t){return new A(t)},t.publisher=function(t,n){return new P(t,n)}}(this.soboku=this.soboku||{});
//# sourceMappingURL=soboku.min.js.map
