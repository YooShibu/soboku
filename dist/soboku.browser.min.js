!function(t){"use strict";function r(t,r){function n(){this.constructor=t}for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e]);t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}function n(t){switch(t.length){case 1:return function(r){return t(r[0])};case 2:return function(r){return t(r[0],r[1])};case 3:return function(r){return t(r[0],r[1],r[2])};case 4:return function(r){return t(r[0],r[1],r[2],r[3])};default:return function(r){return t.apply(void 0,r)}}}function e(t,r){return Object.prototype.hasOwnProperty.call(t,r)}function i(t){for(var r=[],n=0;t.length>n;++n){var e=t[n];-1===o(r,e)&&r.push(e)}return r}function o(t,r){for(var n=0;t.length>n;++n)if(t[n]===r)return n;return-1}function s(t,r){if(!(0>r)){for(var n=r,e=r+1;t.length>e;++n,++e)t[n]=t[e];t.pop()}}function u(t,r){for(var n=[],e=0;t.length>e;++e)n.push(r(t[e]));return n}function h(t,r){var n={};for(var e in t)n[e]=r(t[e]);return n}function p(t){return"object"==typeof t&&t instanceof w}function c(t){return"object"==typeof t&&"function"==typeof t.s}function f(t){return p(t)&&e(t,"depends")}function a(){return new w}function l(t){return c(t)?t:new x(t)}function y(t){for(var r=[],n=0;t.length>n;++n){var e=t[n];f(e)?r=r.concat(e.depends):p(e)&&r.push(e)}return i(r)}function v(t){return t.s()}var g=function(){function t(t,r){this.listeners=t,this.listener=r}return t.prototype.unlisten=function(){var t=this.listeners;null!==t&&(s(t,o(t,this.listener)),this.listeners=null,this.listener=null)},t}(),m=function(){function t(t,r){if(this.listener=t,this.thisArg=r,"function"!=typeof t)throw new TypeError("'listener' must be a function")}return t.prototype.gets=function(t){this.listener.call(this.thisArg,t)},t}(),w=function(){function t(){this.listeners=[]}return t.prototype.next=function(t){for(var r=this.listeners,n=0;r.length>n;++n)r[n].gets(t);return t},t.prototype.report=function(t,r){var n=new m(t,r);return this.listeners.push(n),new g(this.listeners,n)},t.prototype.listenerCount=function(){return this.listeners.length},t}(),b=function(t){function n(r){var n=t.call(this)||this;return n.state=r,n}return r(n,t),n.prototype.next=function(r){return this.state=r,t.prototype.next.call(this,r)},n.prototype.s=function(){return this.state},n}(w),x=function(){function t(t){this.state=t}return t.prototype.s=function(){return this.state},t}(),d=function(t){function n(r,n){var e=t.call(this)||this;return e.gatekeeper=r,n.report(e.listener,e),e}return r(n,t),n.prototype.listener=function(t){this.gatekeeper.s()&&this.next(t)},n}(w),T=function(t){function n(r){var n=t.call(this)||this;return n.array=[],n.array=r||[],n}return r(n,t),n.prototype.s=function(){return this.array},n.prototype.pop=function(){var t=this.array.pop();return this.next(this.array),t},n.prototype.push=function(){var t=Array.prototype.push.apply(this.array,arguments);return this.next(this.array),t},n.prototype.reverse=function(){return this.array.reverse(),this.next(this.array),this.array},n.prototype.shift=function(){var t=this.array.shift();return this.next(this.array),t},n.prototype.sort=function(t){return this.array.sort(t),this.next(this.array),this.array},n.prototype.splice=function(){return Array.prototype.splice.apply(this.array,arguments),this.next(this.array),this.array},n.prototype.unshift=function(){var t=Array.prototype.unshift.apply(this.array,arguments);return this.next(this.array),t},n}(w),j=function(t){function n(r){for(var n=t.call(this)||this,e=n.depends=y(r),i=n.listener,o=0;e.length>o;++o)e[o].report(i,n);return n}return r(n,t),n.prototype.listener=function(t){this.next(this.s())},n}(w),O=function(t){function e(r,e){var i=t.call(this,r)||this;return i.func=n(e),i.states=u(r,l),i}return r(e,t),e.prototype.s=function(){var t=u(this.states,v);return this.func(t)},e}(j),A=function(t){function n(r){var n=this,e=[];for(var i in r)e.push(r[i]);return n=t.call(this,e)||this,n.shObj=h(r,l),n}return r(n,t),n.prototype.s=function(){return h(this.shObj,v)},n}(j),C=function(t){function n(r,n){return t.call(this,r,n)||this}return r(n,t),n}(O),E=function(t){function n(r,n){return t.call(this,r,n)||this}return r(n,t),n.prototype.listener=function(){var t=this.s();t&&this.next(t)},n}(O),k=function(t){function n(r,n){var e=t.call(this)||this;return e.permition=r,e.reporter=n,r.report(e.permitionChanged,e),n.report(e.publish,e),e}return r(n,t),n.prototype.s=function(){return this.reporter.s()},n.prototype.publish=function(t){this.permition.s()&&this.next(t)},n.prototype.permitionChanged=function(t){t&&this.next(this.reporter.s())},n}(w),I=function(){function t(t){var r=this;this.input=a(),this.output=a(),this.cb=function(){return r.output.next(Date.now())},this.isEmitting=!1;var n=this.ms=l(t);this.input.report(this.fireTimer,this),p(n)&&n.report(this.msChanged,this)}return t.prototype.msChanged=function(t){this.isEmitting&&(this.fireTimer(!1),this.fireTimer(!0,t))},t.prototype.fireTimer=function(t,r){this.fire(t,r||this.ms.s()),this.isEmitting=t},t}(),P=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r(n,t),n.prototype.fire=function(t,r){!1===t?clearInterval(this.timer):!1===this.isEmitting&&(this.timer=setInterval(this.cb,r))},n}(I);!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}r(n,t),n.prototype.fire=function(t,r){clearTimeout(this.timer),t&&(this.timer=setTimeout(this.cb,r))}}(I);t.gate=function(t,r){return new d(t,r)},t.reporter=a,t.state=function(t){return new b(t)},t.sarray=function(t){return new T(t)},t.combine=function(t){return new A(t)},t.dependency=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return new C(r,t)},t.trigger=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return new E(r,t)},t.publisher=function(t,r){return new k(t,r)},t.interval=function(t){return new P(t)}}(this.soboku=this.soboku||{});
//# sourceMappingURL=soboku.browser.min.js.map
